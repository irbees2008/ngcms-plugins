# =========================================================================== #
# NG CMS // Плагины // Подписка на комментарии v0.2                     #
# =========================================================================== #

Плагин позволяет подписываться на комментарии новостей с возможностью
отложенной рассылки уведомлений.

## Возможности:
- Подписка на комментарии к новостям
- Отложенная рассылка уведомлений (по расписанию cron)
- Управление списком подписчиков в админ-панели
- Проверка зависимостей (требуется плагин comments)
- Современный интерфейс на Bootstrap 4
- Поддержка Twig-шаблонов

## Для установки плагина требуется:

1. Установить плагин comments (зависимость)
2. Установить плагин subscribe_comments в разделе "Настройки плагинов" в админ-панели NGCMS
3. Добавить JS переменные в функцию add_comment() в файле-шаблоне comments.form.tpl:
```javascript
cajax.setVar("subscribe_box", form.subscribe_box.value);
cajax.setVar("subscribe_checked", form.subscribe_box.checked);
```

4. Добавить элемент-управления подпиской (checkbox) в нужном месте шаблона comments.form.tpl, например:
```html
<td style="padding: 15px;" align="left" colspan="2">
	Подписаться на комментарии по e-mail
	<input type="checkbox" name="subscribe_box" value="1" {subscribe_box_checked} />
</td>
```

5. (Опционально) Для подписки без комментирования добавьте форму в comments.internal.tpl:
```html
<form method="post" action="{post_url_f}" name="subscribe">
	<table>
		<tr>
			<td style="padding: 15px;" align="left" colspan="2">
				Подписаться, не комментируя<br/>
				E-mail: <input type="text" name="subscribe_field" value="" />
				<input type="submit" name="subscribe_me" class="button" value="Подписаться" />
			</td>
		</tr>
	</table>
</form>
```

## Настройки плагина:

- **Отложенная рассылка**: Включить/выключить рассылку по расписанию cron
- **Количество объектов на странице**: Количество подписок в списке (админка)

## Управление подписками:

В админ-панели доступны три раздела:
- **Общие настройки**: Основные параметры плагина
- **Список подписчиков**: Просмотр и управление всеми подписками
- **Сформированные письма**: Просмотр писем, ожидающих отправки (при отложенной рассылке)

## Технические требования:

- NGCMS MinEngineBuild: 2020731+
- PHP 7.0+
- Плагин comments (обязательно)
- Поддержка Twig-шаблонов
