# =========================================================================== #
# NG CMS // Плагины // RSS экспорт новостей                                   #
# =========================================================================== #

Плагин экспорта новостей в формате RSS 2.0 с расширенными настройками.
Позволяет публиковать общую ленту и ленту по конкретной категории.

По умолчанию формируется основная RSS‑лента сайта по всем утверждённым новостям,
отображаемым на главной странице.

-------------------------------------------------------------------------------
URLs и примеры
-------------------------------------------------------------------------------

ЧПУ включены (SEO):
- Полная лента: https://<ваш-домен>/rss.xml
- Лента категории «test»: https://<ваш-домен>/test.xml

ЧПУ выключены (non‑SEO):
- Полная лента: https://<ваш-домен>/plugin/rss_export/
- Лента категории «test»: https://<ваш-домен>/plugin/rss_export/category/?category=test

Примечание: для non‑SEO варианта у обработчика `category` необходим завершающий слеш
перед параметрами (`/category/`), иначе возможен ответ 404.

-------------------------------------------------------------------------------
Настройки плагина (Админка → Плагины → rss_export)
-------------------------------------------------------------------------------

Общие:
- Формат заголовка ленты (site/site+category/handy)
- Свой заголовок (используется при формате «ручной»)
- Формат заголовка новости (только название или «Категория :: Название»)
- Количество новостей (`news_count`)
- Обработка [hide]...[/hide]
- Состав контента (короткая+длинная / только короткая / только длинная)
- Обрезка контента (`truncate`, 0 — не обрезать)
- Отсрочка публикации в ленте (`delay`, в минутах)

Enclosure (интеграция с XFields):
- Включение генерации enclosure по полю XFields
- Выбор поля XFields (тип «images» поддерживает автоматическую подстановку картинки)

Кеширование:
- Включить кеширование
- Период обновления кеша (секунды)

-------------------------------------------------------------------------------
Поведение и совместимость
-------------------------------------------------------------------------------

- Контент ленты очищается от `<script>`/`<iframe>` и опасных inline‑стилей/обработчиков,
	относительные ссылки в `src`/`href` преобразуются в абсолютные.
- В канал добавляется `atom:link rel="self"` с фактическим URL текущего запроса.
- Заголовок ответа: `Content-Type: application/rss+xml; charset=utf-8`.
- Для категории используется её `alt`‑имя (человекопонятный код), а не числовой ID.
- Совместимость c PHP 8 подтверждена (устранены ранние уведомления/буферизация вывода).

-------------------------------------------------------------------------------
Известные ограничения
-------------------------------------------------------------------------------

- Лента по категории формируется для одной категории за раз.
- Тип содержимого enclosure по XFields «images» выставляется как `image/jpeg`,
	для прочих типов используется `application/octet-stream`.

-------------------------------------------------------------------------------
Подсказки по SEO/не‑SEO ссылкам
-------------------------------------------------------------------------------

Если планируете публиковать ссылку на ленту категории без ЧПУ, используйте именно
`/plugin/rss_export/category/?category=<alt_имя_категории>` (с завершающим слешем
после `category/`).
